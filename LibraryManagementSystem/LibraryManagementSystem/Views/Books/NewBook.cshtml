:@model LibraryManagementSystem.ViewModels.IBookCustomData
@*@{
        Layout = null;
    }*@
<h2>Add New Book</h2>
<form id="addBookForm">
    <div class="form-group">
        <label for="Title">Book Title</label>
        <input type="text" class="form-control" id="Title" name="Title" required>
    </div>
    <div class="form-group">
        <label for="AuthorID">Author</label>
        <select class="form-control" id="AuthorID" name="AuthorID" required>
            @foreach (var author in Model.Authors)
            {
                <option value="@author.AuthorID">@author.FirstName</option>
            }
        </select>
    </div>
    <div class="form-group">
        <label for="CategoryID">Category</label>
        <select class="form-control" id="CategoryID" name="CategoryID" required>
            @foreach (var category in Model.Categories)
            {
                <option value="@category.CategoryId">@category.CategoryName</option>
            }
        </select>
    </div>
    <div class="form-group">
        <label for="NumberOfCopies">Total Copies</label>
        <input type="number" class="form-control" id="NumberOfCopies" name="NumberOfCopies" required>
    </div>
    <div class="form-group">
        <label for="AvailableCopies">Available Copies</label>
        <input type="number" class="form-control" id="AvailableCopies" name="AvailableCopies" disabled>
    </div>
    <div class="form-group">
        <label for="PublishedDate">Published Date</label>
        <input type="date" class="form-control" id="PublishedDate" name="PublishedDate" required>
    </div>
    <button type="submit" class="btn btn-primary">Add Book</button>
</form>
<script type="text/javascript">
    $('#NumberOfCopies').on('input', function () {
        var totalCopies = $(this).val();
        $('#AvailableCopies').val(totalCopies);
    });
    $('#addBookForm').submit(function (e) {
        e.preventDefault();

        var formData = $(this).serialize(); // Get form data

        $.ajax({
            url: '@Url.Action("Create", "Books")',
            type: 'POST',
            data: formData,
            success: function (result) {
                    $('#addBookModal').modal('hide');
                location.reload();

            },
            error: function () {
                alert("An error occurred.");
            }
        });
    });
</script>

